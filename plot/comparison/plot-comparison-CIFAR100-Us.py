import matplotlib.pyplot as plt
import numpy as np
import matplotlib

# 设置全局字体为 Times New Roman
matplotlib.rcParams['font.family'] = 'Times New Roman'
matplotlib.rcParams['font.size'] = 14  # 同时设置字体大小

# 定义用户数量
users = np.arange(0, 100)

# 定义不同策略下的BS效用
utility_qdrdfl = [0.03380193622101457, 0.22680792073964628, 0.368929777630989, 0.41239029201769384, 0.4695922235679715,
                  0.5220836435124832, 0.5540639760583974, 0.5334351097600825, 0.5966594126409472, 0.6007843066271243,
                  0.5888152763217209, 0.6224805760839891, 0.6235373534620097, 0.0873629754955978, 0.6533442548819401,
                  0.6548440192019063, 0.6466153618989916, 0.6378626379832002, 0.6577593208536257, 0.667940185667095,
                  0.6641134604079704, 0.6845010046242324, 0.6829773756564685, 0.6776673579476253, 0.6744780596042137,
                  0.6958200989875034, 0.6876210519228116, 0.6785156524889135, 0.6727404121113278, 0.6877065161570917,
                  0.6919429756634126, 0.6882482341880625, 0.7083378811415122, 0.6891448044093005, 0.6812262795877542,
                  0.7025178159301626, 0.6851698047032126, 0.6915458833209529, 0.7046391548190074, 0.6891428263045292,
                  0.7022438935218365, 0.7025150284234247, 0.7013627938656366, 0.7020089601982671, 0.7006901460758916,
                  0.6919913343149311, 0.7102635322567539, 0.7097417280960048, 0.7051503146831415, 0.712244455770914,
                  0.6913346743631035, 0.7058730178977348, 0.701917303067745, 0.7126361491760564, 0.720184601022323,
                  0.7045341325787042, 0.7025122211338573, 0.7100325699364316, 0.7119699981430996, 0.714512826243259,
                  0.706543112953858, 0.7067082200790031, 0.7026231490893691, 0.7174880782209081, 0.7157634950662424,
                  0.6993253112875144, 0.711693659332197, -3.253627833702316, 0.7230512492983343, 0.67154687515662,
                  0.6008636444758726, 0.5759784516209843, 0.54263262246588, 0.6104902081272252, 0.5283857308718867,
                  0.5696442438805271, 0.4892255118814206, 0.5058506469058313, 0.4964258160408086, 0.3052353751661916,
                  0.4466901096624136, 0.32473877522637906, 0.13381001603515763, 0.09677446775684873, 0.2860717426877111,
                  0.27850926400994735, 0.16404777253729463, 0.19691157323418151, -0.056436117523928075,
                  -0.015255895282812126, -0.05318391469374539, 0.0031566801362514774, -0.014371794736876442,
                  -0.04816332089700692, -0.5942077757752475, -0.2866244586606994, -0.3938456974556166,
                  -0.42159268884896584, -0.5052252236907471, -0.9039296429042212]

utility_random = [0.03117902435806652, 0.20725602302912227, 0.36510193284476633, 0.39182004774966106,
                  0.4024508846870156, 0.5055228684548214, 0.5515507152167649, 0.5323905935025126, 0.5647573141030181,
                  0.6006457071977944, 0.6006457071977944, 0.6215177084359598, 0.623236815614238, 0.38770282277294177,
                  0.6413538405948436, 0.6319350194529554, 0.6300323013773148, 0.6348149846310343, 0.6287121411005712,
                  0.6365299919953697, 0.663830465760719, 0.6690544852140512, 0.6811377855506489, 0.6761819082635163,
                  0.6586156844234967, 0.686127537876801, 0.5748752551761509, 0.6646954819686808, 0.6444134806668508,
                  0.6354865873397344, 0.6917946260089678, 0.6749951479102163, 0.6058268200525756, 0.5673342171977426,
                  0.5770867529558159, 0.6014470684329475, 0.6575040491881647, 0.6915329168736131, 0.7006846704500325,
                  0.6218573096482953, 0.697257406640686, 0.6902175102630161, 0.6932289043940578, 0.6859368317532859,
                  0.6583800223083334, 0.6856510333721366, 0.6907342438718811, 0.6503639797441825, 0.7028017482610525,
                  0.680586939056222, 0.6304947085827173, 0.7051794362868988, 0.6730298712722251, 0.6473489898405603,
                  0.7156901134544646, 0.6219417538032457, 0.664390076282845, 0.6536394199682763, 0.6887337426185718,
                  0.703519037194245, 0.7054928167702759, 0.6973402160280411, 0.6863936307302618, 0.6516230962021098,
                  0.668697035903053, 0.6538716388099052, 0.6486617618857199, -0.6337313239458604, 0.7208272787243639,
                  0.7208272787243639, 0.713228377482775, 0.7177079111058076, 0.7177079111058076, 0.7181074459675167,
                  0.7247498010128339, 0.7132606011541394, 0.722415780131618, 0.7010013257884127, 0.7010013257884127,
                  0.7010013257884127, 0.7010013257884127, 0.7010013257884127, 0.7010013257884127, 0.7010013257884127,
                  0.71390942407327, 0.71390942407327, 0.71390942407327, 0.71390942407327, 0.71390942407327,
                  0.71390942407327, 0.71390942407327, 0.71390942407327, 0.71390942407327, 0.71390942407327,
                  0.71390942407327, 0.71390942407327, 0.71390942407327, 0.71390942407327, 0.71390942407327,
                  0.71390942407327]

utility_fix = [-0.030586172447248705, 0.21844482181241798, 0.3423604465401344, 0.3987767529118844, 0.4523766165921126,
               0.49463145792824514, 0.5287406488344155, 0.5202778128090446, 0.5560897893659846, 0.5560897893659846,
               0.5518123225314975, 0.5863779282882402, 0.5924598561457883, 0.5944872439211946, 0.5960976823752961,
               0.6058412482591482, 0.6114170745608636, 0.6109810798358357, 0.6145680016263542, 0.6230665752145121,
               0.6274985903653858, 0.6218682134531122, 0.6416107153232824, 0.6210954151979937, 0.632152500446117,
               0.6418375323916701, 0.6365179586637759, 0.6420989835005064, 0.6388045786356129, 0.6359780624400064,
               0.6489166005170515, 0.6444866784478764, 0.6578485786189212, 0.6429342904250046, 0.6408327248180699,
               0.6520443874928668, 0.6453073383089216, 0.6492389750916674, 0.6512293855104534, 0.6453269051470862,
               0.6571551053670306, 0.6587486771171589, 0.6503714057252881, 0.6655016028639555, 0.6509785648303485,
               0.6534945647381423, 0.656920059915771, 0.6539107703483993, 0.6527318714482684, 0.6540160904137218,
               0.6532733688330927, 0.6569377907180705, 0.6585039656510168, 0.6628642717333535, 0.6685398027483502,
               0.6488160232242386, 0.6559465992066957, 0.6570390350798991, 0.6561736320219598, 0.6716355063473431,
               0.6625106863617494, 0.6616890500298818, 0.6607688318518321, 0.674524386976455, 0.6672087353520055,
               0.6573500749210952, 0.6639886305045424, 0.6652376070846819, 0.6669854862062268, 0.66125223251933,
               0.6589499260308895, 0.6630587170857187, 0.6707601793823312, 0.6665613867254985, 0.668279658640385,
               0.6597839570998938, 0.6699584560953147, 0.6671851998633767, 0.6645019167197828, 0.6667139506167454,
               0.6620397899894466, 0.6558953645071912, 0.6558953645071912, 0.6558953645071912, 0.6558953645071912,
               0.6713387998608231, 0.6683614895257535, 0.6695971693084874, 0.6709660795356855, 0.6661450557649273,
               0.6716172159642095, 0.6718035254402219, 0.6718035254402219, 0.6711298373657728, 0.6651926212566646,
               0.6681713009498007, 0.6667042774584777, 0.6741385906831872, 0.6709604570665404, 0.6709604570665404]

# 绘制图表
plt.plot(users[10:70:10], utility_qdrdfl[8:68:10], 'b--s', label='QD-RDFL')  # 蓝色虚线，方形标记
plt.plot(users[10:70:10], utility_random[8:68:10], 'g--^', label='RANDOM')  # 绿色虚线，三角形标记
plt.plot(users[10:70:10], utility_fix[8:68:10], 'r--o', label='Fix')  # 红色虚线，圆形标记

# 添加图例
plt.legend(fontsize=12)

plt.tick_params(axis='x', labelsize=12)
plt.tick_params(axis='y', labelsize=12)

# 设置标题和坐标轴标签
plt.xlabel(r'$N$')
plt.ylabel(r'$U_s$')

# 显示网格
plt.grid(True)

# 显示图表
plt.show()
