import matplotlib.pyplot as plt
import numpy as np
import matplotlib

# 设置全局字体为 Times New Roman
matplotlib.rcParams['font.family'] = 'Times New Roman'
matplotlib.rcParams['font.size'] = 16  # 同时设置字体大小

# 定义用户数量
users = np.arange(0, 100)

# 定义不同策略下的BS效用
utility_qdrdfl = [0.09749147610231523, 0.10591400308377115, 0.07011534456343907, 0.04887809108175913,
                  0.03638257575174656, 0.02723176338852995, 0.021996558209241512, 0.01798931908600439,
                  0.014849050253686769, 0.012217285582480192, 0.010870329815939198, 0.009238926063750003,
                  0.008547869055625481, 0.0075592913590941, 0.006919743802091344, 0.006379078086203756,
                  0.005912471726981481, 0.005106464725501621, 0.004771312150553287, 0.0046019068838408835,
                  0.0043385466151188885, 0.004160684337193193, 0.0038392128974449693, 0.00372672404377842,
                  0.0031792907769262126, 0.0037898000718971626, 0.0030676424182023037, 0.0031811432582544326,
                  0.002825531726959333, 0.0028166440008818277, 0.0033279289286586716, 0.0028839374306495863,
                  0.002740438712185022, 0.002316904437664867, 0.002484256321323609, 0.0028818731410338006,
                  0.002261607846473171, 0.0019128991975916787, 0.0019793025657913353, 0.002142369047993375,
                  0.0022411883063179787, 0.0026217632588140328, 0.0023664477943217185, 0.00196772112590481,
                  0.0019278457075575083, 0.0018773745048631077, 0.0021030030158852853, 0.0019084005322482233,
                  0.002215957049995727, 0.0019919277063599173, 0.0020194876059627834, 0.002073878328124094,
                  0.0021518597443935684, 0.001864603378476523, 0.0017804508026486945, 0.0021726062854391325,
                  0.001885207722043917, 0.00225461498778941, 0.0020855725264780633, 0.001861332487121525,
                  0.001727094802394954, 0.0018854409898508963, 0.0017220165690739336, 0.0017737821201533434,
                  0.0018595451356546722, 0.001790709398176263, 0.0016105528676651918, 0.0024169114733417424,
                  0.0023884255634833954, 0.002819515426396376, 0.014984350349221544, 0.014958714378695356,
                  0.002498544456255867, 0.0025239116769243232, 0.0032939823722235757, 0.0032325610494934867,
                  0.003272984297899197, 0.003147720083012084, 0.002643276591722016, 0.00452396665689763,
                  0.0040757230283727745, 0.0037016940144193817, 0.003940892479542895, 0.004349351444259512,
                  0.004991570117926061, 0.0037618580133714275, 0.0031450980743472634, 0.0033202357473066844,
                  0.004305896783587743, 0.0034554564230517277, 0.0034856252575593983, 0.040597708631089996,
                  0.0035077595373137318, 0.004985241899025656, 0.04440503188677999, 0.005096838096241834,
                  0.005396323175534358, 0.0067549896239761835, 0.0053650602760609446, 0.006203884521218254]

utility_random = [0.07667859259890444, 0.0976862099814999, 0.039490240745255756, 0.038328971296526924,
                  0.03218686282169381, 0.022696768736024015, 0.02095739629647958, 0.015721679450695285,
                  0.014732056093755852, 0.01163994534501594, 0.0065594964098042345, 0.005389851188092765,
                  0.007575621816716179, 0.006165941837931799, 0.006584120683658212, 0.005036598274162539,
                  0.004992639751278233, 0.004939824370975089, 0.003442933348234184, 0.0023454866739856025,
                  0.0042833124630697475, 0.0027809081552337966, 0.0036228493196613365, 0.002711734038468072,
                  0.002912699108983627, 0.002537286356747326, 0.002256037240009961, 0.002079675305394205,
                  0.0020400387590527275, 0.002348457109575627, 0.0016914693193169662, 0.001839400576013028,
                  0.002473402217602433, 0.001993927386636843, 0.00184011217356076, 0.002681482466772869,
                  0.0020148811031132554, 0.001883580190596893, 0.0011102160318218258, 0.0017258936260200692,
                  0.0016021304211201657, 0.001429078878019042, 0.0020002265611398303, 0.0014181290151473636,
                  0.0010243729834395236, 0.0013200531896884122, 0.001358038702167233, 0.0009759228950270488,
                  0.002044106221578117, 0.0012213223459862687, 0.001057694831059593, 0.0012289034897965297,
                  0.002006614297710232, 0.001127881152128841, 0.000892661841421935, 0.002004148061901472,
                  0.0018217151712917544, 0.0019093018521259524, 0.0016419005100511122, 0.0015734593592456607,
                  0.0014263264040539527, 0.0014734741181169088, 0.000865876345547802, 0.001306228925148069,
                  0.0017198041416517811, 0.001091245073738054, 0.0014524799617805343, 0.0014524799617805343,
                  0.0014524799617805343, 0.0014524799617805343, 0.011363072810469887, 0.0077753504457230916,
                  0.0077753504457230916, 0.0019022555135012602, 0.0019022555135012602, 0.0016480212587321875,
                  0.0016480212587321875, 0.0017696749101888689, 0.0017696749101888689, 0.0017696749101888689,
                  0.0017696749101888689, 0.0020765906958845285, 0.0020765906958845285, 0.0020765906958845285,
                  0.0020765906958845285, 0.0020765906958845285, 0.0018927560674969505, 0.002030077142345432,
                  0.002030077142345432, 0.002030077142345432, 0.002030077142345432, 0.025030874247744403,
                  0.025030874247744403, 0.025030874247744403, 0.02743343332148736, 0.02743343332148736,
                  0.02743343332148736, 0.02743343332148736, 0.02743343332148736, 0.02743343332148736]

utility_fix = [0.2506925207667152, 0.11222944149792184, 0.06340146824709714, 0.041084550748917925, 0.029160383061523465,
               0.021506303960098543, 0.016869715639345334, 0.013521331077650066, 0.011055574852700933,
               0.009103456802250805, 0.007929322432901925, 0.006620687692804319, 0.006211755850917433,
               0.0054890306900464625, 0.004961100317913851, 0.004556051243550022, 0.004217140394913462,
               0.0036424515334593935, 0.003384573862757911, 0.0032800749086375545, 0.0030653843402053886,
               0.0029567501199423514, 0.0027170913228385337, 0.0026241170120475353, 0.002244008082048772,
               0.0026901733252754725, 0.002141622857762724, 0.002232819768267973, 0.001976953828928067,
               0.0019738236266252447, 0.0023401292208955864, 0.0020198785169105145, 0.0019057104794003674,
               0.001611437615476663, 0.0017286431780091033, 0.002024614807764898, 0.0015716352104346767,
               0.0013193946290134318, 0.001372586020634145, 0.001489654938647573, 0.0015631881075154367,
               0.0018408153451589461, 0.0016431282396754247, 0.0013631738371475985, 0.0013419211716451348,
               0.0013059129580363902, 0.0014568359820333148, 0.0013208582113893818, 0.0015389604436000924,
               0.0013782289937211217, 0.001402028455678123, 0.0014445821577613797, 0.0014913137751761025,
               0.00129574887144449, 0.001231436818909758, 0.0015008474909064802, 0.0013101741175369603,
               0.0015606504130646198, 0.001439161805945882, 0.0012815025827322222, 0.0011939775076436603,
               0.0013016442152598237, 0.001187898337490955, 0.0012216488732511098, 0.0012913795775830975,
               0.0012322517910517093, 0.0011157037230279485, 0.0012553582313382275, 0.001220597333274766,
               0.0012813166613434178, 0.0011177473978301244, 0.0010860146170202421, 0.0011373719177893802,
               0.0011182827419044165, 0.0012479089278130786, 0.0012118341731734074, 0.0011965902357855978,
               0.0011503420350211172, 0.0010336175207841607, 0.0013580851773770603, 0.0012560182466781937,
               0.0011685843639492302, 0.0011685843639492302, 0.0011685843639492302, 0.0011685843639492302,
               0.001101920990455479, 0.000980481142615551, 0.0009936902785295486, 0.001135898121962617,
               0.0009840766543462473, 0.0009734893473527566, 0.0011493605237853904, 0.0009473245141822771,
               0.0011495679817265497, 0.0011895887688374112, 0.0011318001037282563, 0.001155621741648524,
               0.001310582289417775, 0.0011195601051072746, 0.0011195601051072746]

# 绘制图表
plt.plot(users[10:70:10], utility_qdrdfl[8:68:10], 'b--s', label='QD-RDFL')  # 蓝色虚线，方形标记
plt.plot(users[10:70:10], utility_random[8:68:10], 'g--^', label='Random')  # 绿色虚线，三角形标记
plt.plot(users[10:70:10], utility_fix[8:68:10], 'r--o', label='Fix')  # 红色虚线，圆形标记

# 添加图例
plt.legend()

plt.tick_params(axis='x', labelsize=14)
plt.tick_params(axis='y', labelsize=14)

# 设置标题和坐标轴标签
plt.xlabel(r'$N$')
plt.ylabel(r'Average of  $U_n$')

# 显示网格
plt.grid(True)

# 显示图表
plt.show()
