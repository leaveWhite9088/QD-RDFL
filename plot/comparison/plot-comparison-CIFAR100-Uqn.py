import matplotlib.pyplot as plt
import numpy as np
import matplotlib

# 设置全局字体为 Times New Roman
matplotlib.rcParams['font.family'] = 'Times New Roman'
matplotlib.rcParams['font.size'] = 14  # 同时设置字体大小

# 定义用户数量
users = np.arange(0, 100)

# 定义不同策略下的BS效用
utility_qdrdfl = [0.09749147610231523, 0.10291367832150404, 0.0715238474336331, 0.048062908091670534,
                  0.0355578212613337, 0.027676700984793103, 0.021903223702001873, 0.01706934396963315,
                  0.015067552162951081, 0.012933327379577671, 0.010687476664424989, 0.009541175967100623,
                  0.00870172545680113, 0.019758195131522674, 0.006849692805482366, 0.006245213123359396,
                  0.006099863889345741, 0.005521998479499494, 0.005121128093675353, 0.004890310017373579,
                  0.004217190322348342, 0.003587562991183399, 0.003979482132127575, 0.0033020193820125243,
                  0.003404861140935659, 0.003188056234584579, 0.0034431626008121457, 0.0032974032608173577,
                  0.0030882233217830383, 0.0028441564979888876, 0.002703754778012289, 0.002621331959410073,
                  0.0021927712101012225, 0.002840575365459947, 0.00257170081639519, 0.002530010655574722,
                  0.0027673130986582387, 0.002723691239892405, 0.0021696308066293303, 0.002567128911579278,
                  0.002288660403458019, 0.0022902935538991385, 0.0022940288302795457, 0.0022920712031519524,
                  0.0022306381510647667, 0.0023496472209677426, 0.0018847267072608688, 0.00221831063257141,
                  0.00200415381774556, 0.0018094340508726403, 0.0019323573910271295, 0.0019366921111209645,
                  0.0024550658067151116, 0.001931990705592163, 0.0016349864457272656, 0.0017859875070000235,
                  0.0021170849844074626, 0.002033419984992573, 0.0017012156516800732, 0.0016929936537583832,
                  0.0018620482329277288, 0.0017961761776554947, 0.0018820928060991025, 0.0018140243413376697,
                  0.0017320604226863253, 0.0018732933114735805, 0.0018558029094218919, 0.01143594803644238,
                  0.001679393100999192, 0.0023341648169408233, 0.0028757824297075286, 0.0030604803401199127,
                  0.0032020447028351566, 0.002555843011847975, 0.0031424888037063898, 0.002622682614348962,
                  0.003171140606683767, 0.002864730837036141, 0.0028803846277588806, 0.0039855957118377855,
                  0.002974421535670456, 0.0035999919316133016, 0.004774756646800176, 0.004752970373143745,
                  0.0034551626903367746, 0.0033872954383295487, 0.0038970938417254904, 0.003558862637868603,
                  0.0048179641062867234, 0.004386718662864592, 0.004458243364556556, 0.0039965218771153225,
                  0.003948906492288511, 0.003961449002183212, 0.006775260436796012, 0.004836067723022698,
                  0.005228286927451609, 0.0051826961349375885, 0.005398382446110999, 0.007329730652630713]

utility_random = [0.06921920440753804, 0.06935841743707516, 0.06288389121033813, 0.03550184641801548,
                  0.02015859492594496, 0.021728465864995803, 0.02006725034481957, 0.01612859775375745,
                  0.010858210754072317, 0.012683508514392735, 0.012683508514392735, 0.009064505454472528,
                  0.00845800752288084, 0.015303969738927847, 0.005691086068792456, 0.004804728722477993,
                  0.004888965049059335, 0.005039086474860668, 0.0038009142427993027, 0.003589369055801777,
                  0.004092400283173602, 0.002913441645758227, 0.003714791732155609, 0.003103847571998415,
                  0.0027533544099805395, 0.00271261771041161, 0.0018082062612325858, 0.0027082511303560524,
                  0.0021247075316752112, 0.0018939570502775024, 0.002652455760645378, 0.002164710613864877,
                  0.0012057235291563413, 0.001445495185120668, 0.0013892795338378654, 0.0013950211022989013,
                  0.002080495166045678, 0.0027083699684903686, 0.0019616766061782585, 0.0016035665502090958,
                  0.0020426030237038644, 0.0019083396224589208, 0.001980745306142577, 0.0018570644377151118,
                  0.0015596657354718041, 0.0020640569304754444, 0.0014936325263112161, 0.0014406319704438845,
                  0.0018555124493174447, 0.0013373972825467904, 0.0012407393010045859, 0.0018581431771524518,
                  0.0018385358083371536, 0.0012254132280467354, 0.0014694326076264777, 0.0010555467753682617,
                  0.0015112305738256492, 0.0013374766524271615, 0.0009688631501734676, 0.0014271734831646187,
                  0.0017693143878980797, 0.0015341724350973667, 0.0015233308764086087, 0.0011495155381236167,
                  0.0011886302856404594, 0.0012901841421045796, 0.001187678106402254, 0.006477550780559163,
                  0.0015592274354364294, 0.0015592274354364294, 0.0018569122786499556, 0.0017283033791882982,
                  0.0017283033791882982, 0.0014914010714293872, 0.001757572234179459, 0.0016965631746731966,
                  0.001754558779131799, 0.0018859491600875691, 0.0018859491600875691, 0.0018859491600875691,
                  0.0018859491600875691, 0.0018859491600875691, 0.0018859491600875691, 0.0018859491600875691,
                  0.0017847466476291504, 0.0017847466476291504, 0.0017847466476291504, 0.0017847466476291504,
                  0.0017847466476291504, 0.0017847466476291504, 0.0017847466476291504, 0.0017847466476291504,
                  0.0017847466476291504, 0.0017847466476291504, 0.0017847466476291504, 0.0017847466476291504,
                  0.0017847466476291504, 0.0017847466476291504, 0.0017847466476291504, 0.0017847466476291504]

utility_fix = [0.2506925207667152, 0.11195058952533048, 0.06355523763427184, 0.041050922088035915, 0.028860125989021396,
               0.02145365894432281, 0.016339052436369447, 0.013107569356126324, 0.011080800548607661,
               0.011080800548607661, 0.007852979867951637, 0.006578297214412114, 0.005930672267109289,
               0.005391397032162796, 0.004656363851354733, 0.004115793762510628, 0.0036306268013147317,
               0.0035445680591356284, 0.0032817958090373468, 0.0032269666077562953, 0.002701699173068087,
               0.002638586149861503, 0.002489201937315985, 0.0023591619623085647, 0.002137273379914475,
               0.0022252875351770544, 0.0019565027546820457, 0.002008790987888673, 0.0017595326751276656,
               0.0016682862390586305, 0.001580564909489681, 0.0016601178470934052, 0.0014990481793016514,
               0.0017463146540918739, 0.0014291220075819092, 0.0016186586366978202, 0.001358818828284118,
               0.0013936902349496894, 0.0013802706727150589, 0.0013550133807594413, 0.001220504265939303,
               0.0012527362800096975, 0.0010583880837335363, 0.0010674674970638442, 0.0012633457913109856,
               0.0011592542810898296, 0.0011707630190370296, 0.001310985415841279, 0.001139547110580259,
               0.001051303839868936, 0.000988844454237444, 0.0010112344111172097, 0.0009349211413111932,
               0.0009509179093379732, 0.0009409516305287338, 0.0010806989462621474, 0.0010936263964444642,
               0.0010510001120230797, 0.0010329206552926332, 0.0007741188097797973, 0.0010353328055446704,
               0.0010218803803174888, 0.0008623943057739242, 0.0008067373850950705, 0.0007414737410423396,
               0.0008814921241411504, 0.0009151455715021066, 0.0010218667423991567, 0.0009822256166305261,
               0.0008800542641981081, 0.0008354697713163881, 0.0009215875628141529, 0.0008182431556280983,
               0.0007371052481607032, 0.000905935522265831, 0.0009916427033868384, 0.0007908815654765114,
               0.0007296447512621654, 0.00078606959912675, 0.0007026361209265137, 0.0009345221052296678,
               0.0009589566283275554, 0.0009589566283275554, 0.0009589566283275554, 0.0009589566283275554,
               0.0007265966393202821, 0.0007178751308079785, 0.0007491977946237393, 0.0006312558114559761,
               0.0006309880958601668, 0.0006127680399503489, 0.0006616886640759707, 0.0006616886640759707,
               0.0007497548750279467, 0.000776093681220856, 0.0007373137918527758, 0.0008564144694082552,
               0.0006468922169900891, 0.0006595096067269234, 0.0006595096067269234]

# 绘制图表
plt.plot(users[10:70:10], utility_qdrdfl[8:68:10], 'b--s', label='QD-RDFL')  # 蓝色虚线，方形标记
plt.plot(users[10:70:10], utility_random[8:68:10], 'g--^', label='Random')  # 绿色虚线，三角形标记
plt.plot(users[10:70:10], utility_fix[8:68:10], 'r--o', label='Fix')  # 红色虚线，圆形标记

# 添加图例
plt.legend(fontsize=12)

plt.tick_params(axis='x', labelsize=12)
plt.tick_params(axis='y', labelsize=12)

# 设置标题和坐标轴标签
plt.xlabel(r'$N$')
plt.ylabel(r'average of  $U_n$')

# 显示网格
plt.grid(True)

# 显示图表
plt.show()
